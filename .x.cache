{"requires":["base64-stream@~0.1.2"],"nodes":{"349a0c1b-77c2-43b7-b02d-cba050273324":{"id":"349a0c1b-77c2-43b7-b02d-cba050273324","title":"StdIn","ns":"stream","name":"stdin","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"},"1e9ca307-707b-4546-83ed-1e5e44688d68":{"id":"1e9ca307-707b-4546-83ed-1e5e44688d68","title":"StdOut","ns":"stream","name":"stdout","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"},"25568f5c-1e59-48fb-94d8-2f40e670f18f":{"id":"25568f5c-1e59-48fb-94d8-2f40e670f18f","title":"Gzip","ns":"stream","name":"gzip","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"},"8b807a14-aba4-46da-97d5-58d0bd86c417":{"id":"8b807a14-aba4-46da-97d5-58d0bd86c417","title":"OnData","ns":"stream","name":"onData","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"},"46e6ce01-d416-4a3e-b5f8-31906a9cd16d":{"id":"46e6ce01-d416-4a3e-b5f8-31906a9cd16d","title":"ReadStream","ns":"fs","name":"createReadStream","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"},"61843e2f-aabe-46a5-b125-3a3cc09f1078":{"id":"61843e2f-aabe-46a5-b125-3a3cc09f1078","title":"OnEnd","ns":"stream","name":"onEnd","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"},"87a59583-37b7-4e31-a3ec-46ef67b56caa":{"id":"87a59583-37b7-4e31-a3ec-46ef67b56caa","title":"B64E","ns":"stream","name":"base64Encode","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"},"5b47af0d-d6f0-4446-871e-39b55c0391f5":{"id":"5b47af0d-d6f0-4446-871e-39b55c0391f5","title":"Done","ns":"console","name":"log","context":{"msg":"Done"},"provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"}},"nodeDefinitions":{"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json":{"stream":{"stdin":{"name":"stdin","ns":"stream","description":"Read for stdin","phrases":{"active":"Reading stdin..."},"expose":["process"],"ports":{"input":{"encoding":{"title":"Encoding","type":"string","default":"utf-8"}},"output":{"stream":{"title":"Stream","type":"Stream"}}},"fn":"// test\nprocess.stdin.resume();\nprocess.stdin.setEncoding(input.encoding);\noutput.stream = process.stdin;\n","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json","title":"StdIn"},"stdout":{"name":"stdout","ns":"stream","description":"Write for stdin","async":true,"phrases":{"active":"Writing to stdout..."},"expose":["process"],"ports":{"input":{"in":{"title":"Input","type":"any"}},"output":{}},"fn":"on.input.in = function() {\n  process.stdout.write(data);\n};\n","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json","title":"StdOut"},"gzip":{"name":"gzip","ns":"stream","description":"Gzip pipe","phrases":{"active":"Gzipping..."},"require":{"zlib":"builtin"},"ports":{"input":{"stream":{"title":"Stream","type":"Stream","required":true}},"output":{"stream":{"title":"Stream","type":"Stream"}}},"fn":"output.stream = input.stream.pipe(zlib.createGzip());\n","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json","title":"Gzip"},"onData":{"name":"onData","ns":"stream","description":"On Data","phrases":{"active":"Doing on data..."},"ports":{"input":{"stream":{"title":"Stream","type":"Stream","required":true}},"output":{"out":{"title":"Output","type":"any"}}},"fn":"output = function(cb) {\n  // just an anonymous group now\n  // can just be collect with >=\n  // TODO: sometimes the grouping behavior is wanted\n  // sometimes not, we do not want to group an\n  // ongoing stream..\n  var g = chi.group();\n\n  input.stream.on('data', function(chunk) {\n\n    cb({\n      out: chunk\n    }, g.item());\n\n  });\n\n  input.stream.on('end', function(chunk) {\n\n    if(chunk) {// not sure if needed\n      cb({ out: chunk }, g.item());\n    }\n\n    g.done();\n    done(); // triggers complete.\n  }\n};\n","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json","title":"OnData"},"onEnd":{"name":"onEnd","ns":"stream","description":"On End","phrases":{"active":"Stream is ending..."},"ports":{"input":{"stream":{"title":"Stream","type":"Stream","required":true}},"output":{"out":{"title":"Output","type":"any"}}},"fn":"output = function(cb) {\n  input.stream.on('end', function(chunk) {\n\n    cb({ out: chunk } );\n\n    done();\n\n  });\n};\n","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"},"base64Encode":{"name":"base64Encode","ns":"stream","description":"Base64 encode stream","phrases":{"active":"Encoding to base64..."},"require":{"base64-stream":"~0.1.2"},"ports":{"input":{"stream":{"title":"Stream","type":"Stream","required":true}},"output":{"stream":{"title":"Stream","type":"Stream"}}},"fn":"output.stream = input.stream.pipe(base64_stream.encode());\n","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"}},"fs":{"createReadStream":{"name":"createReadStream","ns":"fs","title":"Create Read Stream","description":"Creats a Readable Stream Object","phrases":{"active":"Reading file {{input.file}} ({{input.encoding}})"},"require":{"fs":"builtin"},"ports":{"input":{"file":{"title":"Filename","type":"string","required":true},"start":{"title":"Start","type":"number","default":null},"end":{"title":"End","type":"number","default":null},"encoding":{"title":"Encoding","type":"string","default":"utf-8"},"flag":{"title":"Flag","type":"string","default":"r"}},"output":{"error":{"type":"object"},"fd":{"type":"number","title":"File descriptor"},"stream":{"type":"Stream"}}},"env":"server","fn":"output = function(cb) {\n\n  var opts = {\n    flag: input.flag,\n    encoding: input.encoding\n  };\n\n  if(input.start) opts.start = input.start;\n  if(input.end) opts.end = input.end;\n\n  var stream = fs.createReadStream(input.file, opts);\n  cb({ stream: stream});\n\n  stream.on('error', function(err) {\n    cb({ error: err});\n  });\n\n  stream.on('open', function(fd) {\n    cb({ fd: fd});\n  });\n\n};\n","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"}},"console":{"log":{"name":"log","ns":"console","description":"Console log","async":true,"phrases":{"active":"Logging to console"},"ports":{"input":{"msg":{"type":"any","title":"Log message","description":"Logs a message to the console","async":true,"required":true}},"output":{}},"fn":"on.input.msg = function() {\n  console.log(data)\n}\n","provider":"https://raw.github.com/psichi/chix-platform/master/nodes/{ns}/{name}.json"}}}}}